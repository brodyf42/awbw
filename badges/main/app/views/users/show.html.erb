<div class="min-h-screen py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-5xl mx-auto bg-white border border-gray-200 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-200 p-6">

      <!-- Top buttons -->
      <div class="flex justify-end mb-6">
        <% if current_user.super_user? %>
          <%= link_to "Users", users_path, class: "btn btn-secondary-outline mr-2" %>
          <%= link_to "Edit", edit_user_path(@user), class: "btn btn-primary-outline" %>
        <% end %>
      </div>

      <!-- Main two-column layout -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
        <!-- Left column: name + avatar -->
        <div class="flex flex-col items-center md:items-start text-center md:text-left">
          <h2 class="font-bold text-3xl text-gray-900 mb-4"><%= @user.name %></h2>

          <% if @user.avatar.attached? %>
            <%= image_tag url_for(@user.avatar),
                          id: "avatar-preview",
                          class: "w-32 h-32 rounded-full object-cover border border-gray-300 shadow-sm" %>
          <% else %>
            <%= image_tag "missing.png",
                          id: "avatar-preview",
                          class: "w-32 h-32 rounded-full object-cover border border-dashed border-gray-300" %>
          <% end %>
        </div>

        <!-- Right column: organizations -->
        <div>
          <h5 class="text-sm font-semibold uppercase text-gray-700 mb-2">
            Organization affiliations:
          </h5>
          <ul class="text-gray-800">
            <% @user.project_users.each do |project_user| %>
              <li>
                <%= "#{project_user.project.name} - #{project_user.position}" %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>

      <!-- Workshops authored -->
      <div class="mt-10">
        <h5 class="text-sm font-semibold uppercase text-gray-700 mb-2">
          Workshops authored:
        </h5>
        <ul class="text-gray-800 space-y-2">
          <% @user.workshops.each do |workshop| %>
            <%= render "workshops/index_row",
                       workshop: workshop.decorate,
                       link_route: workshop_path(workshop),
                       hide_tags: true %>
          <% end %>
        </ul>
      </div>

    </div>
  </div>
</div>
